<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Buscar Duplicatas</title>
</head>
<body>
    <h3><a href="/" style="color: inherit; text-decoration: none;"><- Voltar</a></h3>

    <h2>Buscar Duplicatas</h2>

    <form action="/buscar_duplicatas" method="GET">

        <label>ID da Duplicata:</label>
        <input type="number" name="id" value="{{ request.args.get('id', '') }}">

        <label>Nome ou CNPJ do Sacado:</label>
        <input type="text" name="sacado" value="{{ request.args.get('sacado', '') }}">

        <label>Nome ou CNPJ do Sacador:</label>
        <input type="text" name="sacador" value="{{ request.args.get('sacador', '') }}">

        <label>Data:</label>
        <input type="date" name="data" value="{{ request.args.get('data', '') }}">

        <label>Status:</label>
        <select name="status">
            <option value="" {% if not request.args.get('status') %}selected{% endif %}>Todos</option>
            <option value="emitida" {% if request.args.get('status')=='emitida' %}selected{% endif %}>Emitida</option>
            <option value="paga" {% if request.args.get('status')=='paga' %}selected{% endif %}>Paga</option>
            <option value="vencida" {% if request.args.get('status')=='vencida' %}selected{% endif %}>Vencida</option>
            <option value="cancelada" {% if request.args.get('status')=='cancelada' %}selected{% endif %}>Cancelada</option>
        </select>

        <button type="submit">Buscar</button>
    </form>

    <hr>

    {% if duplicatas %}
        <h3>Duplicatas encontradas:</h3>

        <table border="1" cellpadding="8">
            <tr>
                <th>ID</th>
                <th>Valor</th>
                <th>Prazo</th>
                <th>Data</th>
                <th>Sacador</th>
                <th>Sacado</th>
                <th>Status</th>
            </tr>

            {% for d in duplicatas %}
            <tr>
                <td>{{ d.id }}</td>
                <td>{{ d.valor }}</td>
                <td>{{ d.prazo }}</td>
                <td>{{ d.data }}</td>
                <td>{{ d.sacador.nome }} ({{ d.sacador.cnpj }})</td>
                <td>{{ d.sacado.nome }} ({{ d.sacado.cnpj }})</td>
                <td>{{ d.status }}</td>
            </tr>
            {% endfor %}
        </table>

    {% elif request.args %}
        <p><strong>Nenhuma duplicata encontrada.</strong></p>
    {% endif %}

</body>
</html>
